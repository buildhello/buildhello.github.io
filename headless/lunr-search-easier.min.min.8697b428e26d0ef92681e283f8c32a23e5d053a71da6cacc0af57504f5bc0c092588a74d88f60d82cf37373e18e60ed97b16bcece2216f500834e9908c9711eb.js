(function(){let i=null,g=null,d=null,e=!1,f=null,b="",j=[];const v=window.location.protocol+"//"+window.location.host+'/search.json',q=window.location.protocol+"//"+window.location.host+'/tags/',l=document.getElementById("search"),h=document.getElementById("searchBox"),o=document.getElementById('search-result'),m=document.querySelector('.results'),c=document.getElementById("results-info"),a=document.createElement("p");a.id="results-message",a.className="p-news";let p=function(){h.addEventListener('keyup',function(){(event.shiftKey||event.keyCode==32)&&event.preventDefault(),(!event.shiftKey||!even.keycode==32)&&(r(),event.preventDefault())})},k=2,r=function(){b=h.value,(b.length==="undefined"||b.length===null||!b||b.length<k)&&(a.textContent=`No results found.`,c.appendChild(a),m.classList.remove('showResults')),b.length>=k&&(event.preventDefault(),s(b,!1),m.classList.add('showResults'))};function s(a,b){h.value=a,a=a.trim(),l.setAttribute("data-running","true"),i?n(a,b):d?(d=a,e=b):(d=a,e=b,u())}function t(){l.removeAttribute("data-running"),d=null,e=!1}function u(){const a=new XMLHttpRequest;a.responseType='json',a.open('GET',v,!0),a.onload=function(){let b=a.response;g={},i=lunr(function(){this.ref('permalink'),this.field("permalink"),this.field("title"),this.field("date"),this.field("update"),this.field("image"),this.field("author"),this.field("summary"),this.field("tint"),this.field("color"),this.field("tags"),this.field("categories");for(let a of b)this.add(a),g[a.permalink]=a}),n(d,e)};function b(a){console.log("Something wrong forming, parsing, transmitting this xhttp request or response")}a.onreadystatechange=()=>{if(a.status===404){console.log('Returned a 404 page, so your data is either blocke or missing');return}},a.send(null)}function n(b,d){try{let h=i.search(b),e=document.getElementById("results"),k=[];while(e.firstChild)k.push(e.firstChild),e.removeChild(e.firstChild);for(f||(f=k);c.firstChild;)j.push(c.firstChild),c.removeChild(c.firstChild);f||(f=j),h.length==0?a.textContent=`No results found.`:h.length==1?a.textContent=`1 result found.`:a.textContent=`Found ${h.length} results for (${b}).`,c.appendChild(a);for(let c of h){let a=g[c.ref],b=o.content.cloneNode(!0);if(b.querySelector(".post-search-image").href=a.permalink,a.color){let c='linear-gradient(rgba('+a.color+', 1), rgba('+a.color+', 1)), url(" ")';b.querySelector(".post-search-image").style.background=c}if(b.querySelector(".search-img").src=a.image,a.tint&&(b.querySelector(".search-img").style.opacity=a.tint),b.querySelector(".post-search-title").href=a.permalink,b.querySelector(".search-title").textContent=a.title,b.querySelector(".post-author").textContent=a.author,b.querySelector(".post-date").textContent=a.date,typeof a.update=='undefined'||a.update==null?b.querySelector(".update").hidden=!0:b.querySelector(".update-date").textContent=a.update,a.tags){let c=document.createElementNS('http://www.w3.org/2000/svg','svg'),d=document.createElementNS('http://www.w3.org/2000/svg','path');c.setAttribute('fill','#515151'),c.setAttribute('viewBox','0 0 640 512'),c.setAttribute('stroke','none'),c.classList.add('tags_svg'),d.setAttribute('d','M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z'),d.setAttribute('stroke','none'),c.appendChild(d);let e=document.createElement("i");e.innerHTML='&nbsp;|&nbsp;',b.querySelector(".meta_hold").appendChild(e),b.querySelector(".meta_hold").appendChild(c),a.tags.forEach(function(d){let c=d,a=document.createElement("a");a.href=q+c+'/',a.textContent=c+',',b.querySelector(".meta_hold").appendChild(a)})}else b.querySelector(".post-tags").hidden=!0;b.querySelector(".post-search-summary").textContent=w(a.summary,30),b.querySelector(".post-search-continue").href=a.permalink,e.appendChild(b)}d||history.pushState({type:"search",term:b},a.textContent,"#search="+encodeURIComponent(b))}catch(a){console.error(a)}finally{t()}}function w(d,e){let a,b="",c=0,f=/(\S+)(\s*)/g;while(a=f.exec(d))if(c++,c<=e)b+=a[0];else{let c=a[1][a[1].length-1],d=a[2][0];if(/[.?!"]/.test(c)||d=="\n"){b+=a[1];break}b+=a[0]}return b}p()})()